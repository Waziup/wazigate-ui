<!DOCTYPE html>




 <html class="no-js" lang="en"> 
<head>
  <link rel="shortcut icon" type="image/png" href="../../../images/favicon.ico">
  <link rel="icon" type="image/png" href="../../../images/favicon.ico">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
  <title>API V1 Gateways - WAZIUP Platform</title>
  <meta name="generator" content="Hugo 0.40.1" />

  <link rel="canonical" href="../gateways.2">
  <meta property="og:url" content="https://www.waziup.io/documentation/4-api/gateways/">
  
  
                <meta property="og:title" content="WAZIUP Platform">
  
                <meta name="apple-mobile-web-app-title" content="WAZIUP Platform">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">


  <style>
    @font-face {
      font-family: 'Icon';
      format('embedded-opentype'),
      format('woff'),
      format('truetype'),
      format('svg');
      font-weight: normal;
      font-style: normal;
    }
  </style>

  <link rel="stylesheet" href="../../../css/style.css">
  <link rel="stylesheet" href="../../../css/font-awesome.css">
  <link rel="stylesheet" href="../../../css/highlight.css">
  <link rel="stylesheet" href="../../../css/roboto.css">
  <link rel="stylesheet" href="../../../css/roboto-mono.css">
  <script src="../../../js/vendor.js"></script>
  <script src="../../../js/app.js"></script>

  
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NT276CR');</script>
  

</head>
<body class=" ">


<div class="single-page">
  <nav aria-label="Header" id="header" class="top-menu">
  <div class="left">
    <a href="../../../index.html"> 
      <div id="logo" class="logo"></div>
    </a>
  </div>

  <div class="right">
    <div class="top-menu-items" id="top-menu-items">
      
        <a href="../../../solutions/index.html" id="top-menu-item-text" class="top-menu-item">Solutions</a>
      
        <a href="../../../documentation.2" id="top-menu-item-text" class="top-menu-item">User manuals</a>
      
        <a href="../../../tutorials/index.html" id="top-menu-item-text" class="top-menu-item">Tutorials</a>
      
        <a href="../gateways.2" id="top-menu-item-text" class="top-menu-item"></a>
      
        <a href="../gateways.2" id="top-menu-item-text" class="top-menu-item"></a>
      
    </div>

    <div class="download">
      <a href="https://dashboard.waziup.io" class="button button--red">
        Go to dashboard
      </a>
    </div>
    
    <a href="https://github.com/Waziup/platform" target="_blank" class="github-logo">
      <i class="fa fa-2x fa-github" aria-hidden="true"></i>
    </a>

    <div class="search-button">
      <i class="fa fa-lg fa-search"></i>
    </div>

  </div>
</nav>

<ul id="mobile-menu" style="display: none">
</ul>

<div id="search">
  <div class="search-bar">
    <div class="search-bar__back">
      <i class="fa fa-lg fa-times"></i>
    </div>
    <input class="search-bar__input" placeholder='Type your search here...'>
  </div>
  <div class="search-results">
    <ul></ul>
  </div>
</div>


</div>

<div class="page documentation">
    <div class="menu">
     

    
    

    
    
      
        
        <a class="side-menu-item " href="../../1-dashboard/index.html">
          <div class="bullet">
            <img src="../../../img/003-Small-icons/block-03.svg" alt="\">
          </div>
          <div class="section-title">
            <p class="text active">Dashboard</p>
          </div>
          <div class="folding-indicator">
          </div>
        </a>
        
      
        
        <a class="side-menu-item " href="../../3-deployassist/index.html">
          <div class="bullet">
            <img src="../../../img/003-Small-icons/block-03.svg" alt="\">
          </div>
          <div class="section-title">
            <p class="text active">Deployment assistant</p>
          </div>
          <div class="folding-indicator">
          </div>
        </a>
        
      
        
        <a class="side-menu-item active" href="../index.html">
          <div class="bullet">
            <img src="../../../img/003-Small-icons/block-03.svg" alt="\">
          </div>
          <div class="section-title">
            <p class="text active">API Reference</p>
          </div>
          <div class="folding-indicator">
          </div>
        </a>
        
          
            <a class="sub-menu-item " href="../access_control.2">
              <p class="text">Access Control</p>
            </a>
          
            <a class="sub-menu-item " href="../sensor_management.2">
              <p class="text">Sensor management</p>
            </a>
          
            <a class="sub-menu-item " href="../notifications.2">
              <p class="text">Notifications</p>
            </a>
          
            <a class="sub-menu-item active" href="../gateways.2">
              <p class="text">Gateways</p>
            </a>
          
            <a class="sub-menu-item " href="../migration_guide_v1.1.2">
              <p class="text">V1.1 Migration guide</p>
            </a>
          
        
      
        
        <a class="side-menu-item " href="../../5-customapp/index.html">
          <div class="bullet">
            <img src="../../../img/003-Small-icons/block-03.svg" alt="\">
          </div>
          <div class="section-title">
            <p class="text active">Web application</p>
          </div>
          <div class="folding-indicator">
          </div>
        </a>
        
      
        
        <a class="side-menu-item " href="../../6-wazidev/index.html">
          <div class="bullet">
            <img src="../../../img/003-Small-icons/block-03.svg" alt="\">
          </div>
          <div class="section-title">
            <p class="text active">WaziDev</p>
          </div>
          <div class="folding-indicator">
          </div>
        </a>
        
      
        
        <a class="side-menu-item " href="../../7-wazigate/index.html">
          <div class="bullet">
            <img src="../../../img/003-Small-icons/block-03.svg" alt="\">
          </div>
          <div class="section-title">
            <p class="text active">WaziGate</p>
          </div>
          <div class="folding-indicator">
          </div>
        </a>
        
      
    

    
    

    
    

    
    


    </div>
    <div class="content">
      <h1 class="content-header">API V1 Gateways</h1>
      <div class="markdowned">
        

<p>This tutorial will show you how to connect your gateway to Waziup.
First of all, open the API documentation available at <a href="https://api.waziup.io/docs">https://api.waziup.io/docs</a>.
With this website, you can explore and interact with all the endpoints of the Waziup API.</p>

<h1 id="simple-gateway-protocol">Simple gateway protocol</h1>

<p>As a simple approach, a gateway can just push datapoints on existing sensors on the platform.
The sensor and measurement should be created beforehand on the <a href="https://dashboard.waziup.io">dashboard</a>.
To create the sensor, follow <a href="https://www.waziup.io/tutorials/software/dashboard/">this tutorial</a>.
We will not use any authentication, so the sensor need to be public.</p>

<p>We are now ready to push a new datapoint!
Follow <a href="../sensor_management.2#push-data-to-your-sensor-node">those instructions</a> to push the datapoint.
Once pushed, you should alerady see the new value displayed on the dashboard!</p>

<h1 id="complex-gateway-protocol">Complex gateway protocol</h1>

<p>Gateways can create the sensors themselves (instead of having to create them manually on the dashboard).
In order to maintain privacy, a token should be obtained before each call.
Once this is done, datapoints can be pushed.
A suggested protocol is the following:</p>

<ol>
<li>Get a token: <code>GET api/v1/auth/token</code>. See <a href="../access_control.2#authentication">here</a>.</li>
<li>Verify if the sensor exists: <code>GET /api/v1/sensors/&lt;sensor_id&gt;</code>. See <a href="../sensor_management.2#read-a-particular-sensor">here</a>.</li>
<li>If a 404 is received, create it: <code>POST /api/v1/sensors</code>. See <a href="../sensor_management.2#create-a-sensor-node">here</a>.</li>
<li>Verify if the measurement exists: <code>GET /api/v1/sensors/&lt;sensor_id&gt;/measurements/&lt;measurement_id</code>. See <a href="../sensor_management.2#check-your-measurement">here</a>.</li>
<li>If a 404 is received, create it: <code>POST /api/v1/sensors/&lt;sensor_id&gt;/measurements</code>. See <a href="../sensor_management.2#create-measurements">here</a>.</li>
<li>Finally, push the datapoint: <code>POST /api/v1/sensors/&lt;sensor_id&gt;/measurements/&lt;measurement_id&gt;/values</code>. See <a href="../sensor_management.2#push-data-to-your-sensor-node">here</a>.</li>
</ol>

<p>This protocol takes care of creating a sensor and measurement for the owner of the sensor. It then pushes the datapoint.</p>

      </div>
    </div>
</div>

<div class="lander-row lander-row--blue footer">
  <div class="container">
    <div class="row">
      <div class="col col-3">
        <h2 class="h2">Learn More</h2>
        <a href="https://www.waziup.io/documentation/why-use-waziup">
          <p class="text">Why use Waziup?</p>
        </a>
        <a href="https://www.waziup.io/documentation/how-waziup-works/">
          <p class="text">Documentation</p>
        </a>
        <a href="../../../about">
          <p class="text">About us</p>
        </a>
      </div>
        <div class="col col-6">
        <h2 class="h2">All things code</h2>
          <a href="https://www.waziup.io/support">
            <p class="text">Support</p>
          </a>
          <a href="https://github.com/waziup/platform" target="_blank">
            <p class="text">GitHub</p>
          </a>
      </div>
      <div class="col col-6">
        <h2 class="h2">Stay up to date</h2>
        <p class="text">
          Leave your email for the latest news: We won’t spam you and won’t go off topic.
        </p>

        <div class="social-buttons">
          <p class="text">Follow us on</p>
          <a href="https://twitter.com/waziupIOT" target="_blank">
            <i class="fa fa-2x fa-twitter"></i>
          </a>

          <a href="https://www.linkedin.com/company/magnetic-io" target="_blank">
            <i class="fa fa-2x fa-linkedin"></i>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="footer-bottom lander-row--blue">
  <div class="container">
    <div class="part">
      <a href="../../../about"><img class="waziup-logo" src="../../../img/005-waziup/Logo/logo-waziup-white.svg" alt=""></a>
    </div>

    <div class="part">
      <p class="text">Code licensed under<a type="application/rss+xml" href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache 2</a> © 2016 <a href='../../../about'>Waziup.io</a></p>
    </div>
  </div>
</div>

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NT276CR"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>


